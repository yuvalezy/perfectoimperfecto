<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Capítulo 10 - Después de ver el vídeo</title>
    <link rel="stylesheet" href="survey.css">
    <style>
        .checkbox-group {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .checkbox-option {
            display: flex;
            align-items: center;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .checkbox-option:hover {
            border-color: #667eea;
            background-color: #f5f7ff;
        }

        .checkbox-option input[type="checkbox"] {
            margin-right: 12px;
            cursor: pointer;
            width: 18px;
            height: 18px;
        }

        .checkbox-option label {
            cursor: pointer;
            flex: 1;
            color: #333;
        }

        .checkbox-option input[type="checkbox"]:checked + label {
            color: #667eea;
            font-weight: 500;
        }

        .hidden {
            display: none;
        }

        .conditional-section {
            transition: opacity 0.3s ease;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Después de ver el vídeo, completa este ejercicio:</h1>
        <form id="pollForm">

            <!-- Encabezado de Sección: Para los hombres -->
            <div class="question-section">
                <h2 style="color: #667eea; margin-bottom: 20px; font-size: 1.3em;">Para ser llenado por los hombres</h2>
            </div>

            <!-- Q1 - ¿Estás consciente? -->
            <div class="question-section">
                <div class="question-title">Q1: ¿Estás consciente de las necesidades afectivas de tu esposa? (las 3 A: Afecto, Atención, Aprecio)</div>
                <div class="options">
                    <div class="option">
                        <input type="radio" id="q1_1" name="q1" value="Sí" required>
                        <label for="q1_1">Sí</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q1_2" name="q1" value="No">
                        <label for="q1_2">No</label>
                    </div>
                </div>
            </div>

            <!-- Q2 - Ejemplos como checkboxes, visible si Q1=Sí -->
            <div class="question-section conditional-section hidden" id="q2-section">
                <div class="question-title">Q2: Aquí te damos algunos ejemplos para que verifiques si tu respuesta se adapta con lo que significa tener en cuenta sus necesidades afectivas. Marca con un gancho en las que aplique:</div>
                <div class="checkbox-group">
                    <div class="checkbox-option">
                        <input type="checkbox" id="q2_1" name="q2" value="Manifiestas tus sentimientos afectivos (te quiero, te amo, me gustas…) frecuentamente a tu esposa">
                        <label for="q2_1">Manifiestas tus sentimientos afectivos (te quiero, te amo, me gustas…) frecuentamente a tu esposa</label>
                    </div>
                    <div class="checkbox-option">
                        <input type="checkbox" id="q2_2" name="q2" value="Expresas tus sentimientos afectivos hacia tu esposa a través de gestos como ayudar en las compras u otros oficios, ayudar con los hijos, ayudar a resolver alguna situación">
                        <label for="q2_2">Expresas tus sentimientos afectivos hacia tu esposa a través de gestos como ayudar en las compras u otros oficios, ayudar con los hijos, ayudar a resolver alguna situación</label>
                    </div>
                    <div class="checkbox-option">
                        <input type="checkbox" id="q2_3" name="q2" value="Demuestras tus sentimientos afectivos hacia tu esposa a través de acciones como invitarla a salir, pasar un rato juntos, ir de viaje, jugar, etc.">
                        <label for="q2_3">Demuestras tus sentimientos afectivos hacia tu esposa a través de acciones como invitarla a salir, pasar un rato juntos, ir de viaje, jugar, etc.</label>
                    </div>
                    <div class="checkbox-option">
                        <input type="checkbox" id="q2_4" name="q2" value="Dejas ver tus sentimientos afectivos hacia tu esposa con detalles como regalos en ocasiones especiales, flores, un dulce de su agrado, algo &quot;random&quot;, al azar">
                        <label for="q2_4">Dejas ver tus sentimientos afectivos hacia tu esposa con detalles como regalos en ocasiones especiales, flores, un dulce de su agrado, algo "random", al azar</label>
                    </div>
                </div>
            </div>

            <!-- Encabezado de Sección: Para las mujeres -->
            <div class="question-section">
                <h2 style="color: #667eea; margin-bottom: 20px; font-size: 1.3em;">Para ser llenado por las mujeres</h2>
            </div>

            <!-- Q3 - ¿Estás consciente? -->
            <div class="question-section">
                <div class="question-title">Q3: ¿Estás consciente de las necesidades de tu esposo? (las 3 P: Poder, Prestigio, Placer)</div>
                <div class="options">
                    <div class="option">
                        <input type="radio" id="q3_1" name="q3" value="Sí" required>
                        <label for="q3_1">Sí</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q3_2" name="q3" value="No">
                        <label for="q3_2">No</label>
                    </div>
                </div>
            </div>

            <!-- Q4 - Ejemplos como checkboxes, visible si Q3=Sí -->
            <div class="question-section conditional-section hidden" id="q4-section">
                <div class="question-title">Q4: Aquí te damos algunos ejemplos para que verifiques si tu respuesta se ajusta a lo que significa tener en cuenta sus necesidades afectivas. Marca con un gancho las que aplican:</div>
                <div class="checkbox-group">
                    <div class="checkbox-option">
                        <input type="checkbox" id="q4_1" name="q4" value="Busco ocasiones para pedirle a mi esposo apoyo en algo que él sabe hacer bien, lo que aumenta su sentimiento de valía">
                        <label for="q4_1">Busco ocasiones para pedirle a mi esposo apoyo en algo que él sabe hacer bien, lo que aumenta su sentimiento de valía</label>
                    </div>
                    <div class="checkbox-option">
                        <input type="checkbox" id="q4_2" name="q4" value="Tomo la iniciativa de darle a mi esposo espacio para salir con sus amigos o realizar actividades que le gusten">
                        <label for="q4_2">Tomo la iniciativa de darle a mi esposo espacio para salir con sus amigos o realizar actividades que le gusten</label>
                    </div>
                    <div class="checkbox-option">
                        <input type="checkbox" id="q4_3" name="q4" value="Respeto las diferencias entre mi esposo y yo, especialmente cuando no está atento a cosas que para mí son obvias y busco el momento oportuno para hablar de ellas">
                        <label for="q4_3">Respeto las diferencias entre mi esposo y yo, especialmente cuando no está atento a cosas que para mí son obvias y busco el momento oportuno para hablar de ellas</label>
                    </div>
                    <div class="checkbox-option">
                        <input type="checkbox" id="q4_4" name="q4" value="De vez en cuando le preparo una comida que le encanta a pesar de que no es la más saludable">
                        <label for="q4_4">De vez en cuando le preparo una comida que le encanta a pesar de que no es la más saludable</label>
                    </div>
                </div>
            </div>

            <!-- Conversation Section -->
            <div class="question-section">
                <div class="question-title">Conversen:</div>
                <div class="text-input-section">
                    <label for="conversation" style="color: #666; font-size: 14px;">¿Qué acción puedo tomar hoy para demostrar mi compromiso de dar en esta relación, sin esperar resultados en el futuro?</label>
                    <textarea id="conversation" name="conversation" placeholder="Escribe tu respuesta aquí..." required></textarea>
                    <div class="error-message" id="textError" style="display: none;"></div>
                </div>
            </div>

            <!-- Email Section -->
            <div class="question-section">
                <div class="question-title"><label for="email">Correo Electrónico</label></div>
                <div class="text-input-section">
                    <input type="email" id="email" name="email" placeholder="ejemplo@correo.com" required>
                    <div class="error-message" id="emailError" style="display: none;"></div>
                </div>
            </div>

            <!-- reCAPTCHA -->
            <div class="question-section">
                <div class="g-recaptcha" data-sitekey="6LeyoggsAAAAAAgXzEg9PAC9ypZtr-yyc24cAnN_"></div>
                <div class="error-message" id="recaptchaError" style="display: none;"></div>
            </div>

            <!-- Buttons -->
            <div class="button-group">
                <button type="submit" class="submit-btn" id="submitBtn">Enviar Encuesta</button>
                <button type="reset" class="reset-btn" id="resetBtn">Limpiar</button>
            </div>
        </form>

        <!-- Success Message -->
        <div class="success-message" id="successMessage">
            ✓ ¡Encuesta enviada exitosamente!
        </div>

        <!-- Summary Section -->
        <div class="summary-section" id="summarySection" style="display: none;">
            <h2 class="summary-title">Resumen de tus respuestas</h2>
            <div id="summaryContent"></div>
        </div>
    </div>

    <script>
        // Handle conditional questions
        document.addEventListener('DOMContentLoaded', function() {
            const q1Radios = document.querySelectorAll('input[name="q1"]');
            const q2Section = document.getElementById('q2-section');
            const q2Checkboxes = document.querySelectorAll('#q2-section input[type="checkbox"]');

            const q3Radios = document.querySelectorAll('input[name="q3"]');
            const q4Section = document.getElementById('q4-section');
            const q4Checkboxes = document.querySelectorAll('#q4-section input[type="checkbox"]');

            // Q1=Sí -> mostrar Q2 checkboxes
            q1Radios.forEach(radio => {
                radio.addEventListener('change', function() {
                    if (this.value === 'Sí') {
                        q2Section.classList.remove('hidden');
                    } else {
                        q2Section.classList.add('hidden');
                        q2Checkboxes.forEach(cb => cb.checked = false);
                    }
                });
            });

            // Q3=Sí -> mostrar Q4 checkboxes
            q3Radios.forEach(radio => {
                radio.addEventListener('change', function() {
                    if (this.value === 'Sí') {
                        q4Section.classList.remove('hidden');
                    } else {
                        q4Section.classList.add('hidden');
                        q4Checkboxes.forEach(cb => cb.checked = false);
                    }
                });
            });
        });

        // Define questions for this survey
        window.surveyQuestions = {
            q1: "Q1: ¿Estás consciente de las necesidades afectivas de tu esposa? (las 3 A: Afecto, Atención, Aprecio)",
            q2: "Q2: Marca con un gancho en las que aplique:",
            q3: "Q3: ¿Estás consciente de las necesidades de tu esposo? (las 3 P: Poder, Prestigio, Placer)",
            q4: "Q4: Marca con un gancho las que aplican:",
            conversation: "¿Qué acción puedo tomar hoy para demostrar mi compromiso de dar en esta relación, sin esperar resultados en el futuro?"
        };

        // Define the chapter name for this survey
        window.chapterName = "Capítulo 10";
    </script>

    <!-- EmailJS Library -->
    <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
    <script>
        (function() {
            emailjs.init("wZ_Z4F9Y-8CcFzD2g");
        })();
    </script>

    <!-- Google reCAPTCHA v2 -->
    <script src="https://www.google.com/recaptcha/api.js" async defer></script>

    <script src="survey.js?v=20250110005"></script>
</body>
</html>
