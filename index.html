<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow">
    <title>Encuestas - 칈ndice de Cap칤tulos</title>
    <link rel="stylesheet" href="survey.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <style>
        .chapter-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .chapter-card {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .chapter-card:hover {
            border-color: #667eea;
            background-color: #f5f7ff;
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.2);
        }

        .chapter-link {
            text-decoration: none;
            color: inherit;
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .chapter-link:hover .chapter-number {
            color: #764ba2;
        }

        .chapter-number {
            font-size: 36px;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 10px;
        }

        .chapter-title {
            font-size: 14px;
            color: #666;
        }

        .example-link {
            margin-top: 30px;
            padding-top: 30px;
            border-top: 2px solid #e0e0e0;
            text-align: center;
        }

        .example-link a {
            color: #764ba2;
            text-decoration: none;
            font-weight: 600;
            font-size: 16px;
            padding: 12px 24px;
            border: 2px solid #764ba2;
            border-radius: 8px;
            display: inline-block;
            transition: all 0.3s ease;
        }

        .example-link a:hover {
            background: #764ba2;
            color: white;
        }

        .qr-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 6px;
            padding: 8px 16px;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
        }

        .qr-button:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        .qr-button:active {
            transform: scale(0.98);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Encuestas de Relaciones y Comunicaci칩n</h1>
        <p style="text-align: center; color: #666; margin-bottom: 20px;">
            Selecciona un cap칤tulo para comenzar
        </p>

        <div class="chapter-list">
            <div class="chapter-card">
                <a href="capitulo_01.html" class="chapter-link">
                    <div class="chapter-number">1</div>
                    <div class="chapter-title">Cap칤tulo 1</div>
                </a>
                <button class="qr-button" onclick="downloadQR('capitulo_01.html', 'Capitulo_01')">游닌 Descargar QR</button>
            </div>
            <div class="chapter-card">
                <a href="capitulo_02.html" class="chapter-link">
                    <div class="chapter-number">2</div>
                    <div class="chapter-title">Cap칤tulo 2</div>
                </a>
                <button class="qr-button" onclick="downloadQR('capitulo_02.html', 'Capitulo_02')">游닌 Descargar QR</button>
            </div>
            <div class="chapter-card">
                <a href="capitulo_03.html" class="chapter-link">
                    <div class="chapter-number">3</div>
                    <div class="chapter-title">Cap칤tulo 3</div>
                </a>
                <button class="qr-button" onclick="downloadQR('capitulo_03.html', 'Capitulo_03')">游닌 Descargar QR</button>
            </div>
            <div class="chapter-card">
                <a href="capitulo_04.html" class="chapter-link">
                    <div class="chapter-number">4</div>
                    <div class="chapter-title">Cap칤tulo 4</div>
                </a>
                <button class="qr-button" onclick="downloadQR('capitulo_04.html', 'Capitulo_04')">游닌 Descargar QR</button>
            </div>
            <div class="chapter-card">
                <a href="capitulo_05.html" class="chapter-link">
                    <div class="chapter-number">5</div>
                    <div class="chapter-title">Cap칤tulo 5</div>
                </a>
                <button class="qr-button" onclick="downloadQR('capitulo_05.html', 'Capitulo_05')">游닌 Descargar QR</button>
            </div>
            <div class="chapter-card">
                <a href="capitulo_06.html" class="chapter-link">
                    <div class="chapter-number">6</div>
                    <div class="chapter-title">Cap칤tulo 6</div>
                </a>
                <button class="qr-button" onclick="downloadQR('capitulo_06.html', 'Capitulo_06')">游닌 Descargar QR</button>
            </div>
            <div class="chapter-card">
                <a href="capitulo_07.html" class="chapter-link">
                    <div class="chapter-number">7</div>
                    <div class="chapter-title">Cap칤tulo 7</div>
                </a>
                <button class="qr-button" onclick="downloadQR('capitulo_07.html', 'Capitulo_07')">游닌 Descargar QR</button>
            </div>
            <div class="chapter-card">
                <a href="capitulo_08.html" class="chapter-link">
                    <div class="chapter-number">8</div>
                    <div class="chapter-title">Cap칤tulo 8</div>
                </a>
                <button class="qr-button" onclick="downloadQR('capitulo_08.html', 'Capitulo_08')">游닌 Descargar QR</button>
            </div>
            <div class="chapter-card">
                <a href="capitulo_09.html" class="chapter-link">
                    <div class="chapter-number">9</div>
                    <div class="chapter-title">Cap칤tulo 9</div>
                </a>
                <button class="qr-button" onclick="downloadQR('capitulo_09.html', 'Capitulo_09')">游닌 Descargar QR</button>
            </div>
            <div class="chapter-card">
                <a href="capitulo_10.html" class="chapter-link">
                    <div class="chapter-number">10</div>
                    <div class="chapter-title">Cap칤tulo 10</div>
                </a>
                <button class="qr-button" onclick="downloadQR('capitulo_10.html', 'Capitulo_10')">游닌 Descargar QR</button>
            </div>
            <div class="chapter-card">
                <a href="capitulo_11.html" class="chapter-link">
                    <div class="chapter-number">11</div>
                    <div class="chapter-title">Cap칤tulo 11</div>
                </a>
                <button class="qr-button" onclick="downloadQR('capitulo_11.html', 'Capitulo_11')">游닌 Descargar QR</button>
            </div>
            <div class="chapter-card">
                <a href="capitulo_12.html" class="chapter-link">
                    <div class="chapter-number">12</div>
                    <div class="chapter-title">Cap칤tulo 12</div>
                </a>
                <button class="qr-button" onclick="downloadQR('capitulo_12.html', 'Capitulo_12')">游닌 Descargar QR</button>
            </div>
            <div class="chapter-card">
                <a href="capitulo_13.html" class="chapter-link">
                    <div class="chapter-number">13</div>
                    <div class="chapter-title">Cap칤tulo 13</div>
                </a>
                <button class="qr-button" onclick="downloadQR('capitulo_13.html', 'Capitulo_13')">游닌 Descargar QR</button>
            </div>
            <div class="chapter-card">
                <a href="capitulo_14.html" class="chapter-link">
                    <div class="chapter-number">14</div>
                    <div class="chapter-title">Cap칤tulo 14</div>
                </a>
                <button class="qr-button" onclick="downloadQR('capitulo_14.html', 'Capitulo_14')">游닌 Descargar QR</button>
            </div>
            <div class="chapter-card">
                <a href="capitulo_15.html" class="chapter-link">
                    <div class="chapter-number">15</div>
                    <div class="chapter-title">Cap칤tulo 15</div>
                </a>
                <button class="qr-button" onclick="downloadQR('capitulo_15.html', 'Capitulo_15')">游닌 Descargar QR</button>
            </div>
            <div class="chapter-card">
                <a href="capitulo_16.html" class="chapter-link">
                    <div class="chapter-number">16</div>
                    <div class="chapter-title">Cap칤tulo 16</div>
                </a>
                <button class="qr-button" onclick="downloadQR('capitulo_16.html', 'Capitulo_16')">游닌 Descargar QR</button>
            </div>
            <div class="chapter-card">
                <a href="capitulo_17.html" class="chapter-link">
                    <div class="chapter-number">17</div>
                    <div class="chapter-title">Cap칤tulo 17</div>
                </a>
                <button class="qr-button" onclick="downloadQR('capitulo_17.html', 'Capitulo_17')">游닌 Descargar QR</button>
            </div>
            <div class="chapter-card">
                <a href="capitulo_18.html" class="chapter-link">
                    <div class="chapter-number">18</div>
                    <div class="chapter-title">Cap칤tulo 18</div>
                </a>
                <button class="qr-button" onclick="downloadQR('capitulo_18.html', 'Capitulo_18')">游닌 Descargar QR</button>
            </div>
            <div class="chapter-card">
                <a href="capitulo_19.html" class="chapter-link">
                    <div class="chapter-number">19</div>
                    <div class="chapter-title">Cap칤tulo 19</div>
                </a>
                <button class="qr-button" onclick="downloadQR('capitulo_19.html', 'Capitulo_19')">游닌 Descargar QR</button>
            </div>
            <div class="chapter-card">
                <a href="capitulo_20.html" class="chapter-link">
                    <div class="chapter-number">20</div>
                    <div class="chapter-title">Cap칤tulo 20</div>
                </a>
                <button class="qr-button" onclick="downloadQR('capitulo_20.html', 'Capitulo_20')">游닌 Descargar QR</button>
            </div>
            <div class="chapter-card">
                <a href="capitulo_21.html" class="chapter-link">
                    <div class="chapter-number">21</div>
                    <div class="chapter-title">Cap칤tulo 21</div>
                </a>
                <button class="qr-button" onclick="downloadQR('capitulo_21.html', 'Capitulo_21')">游닌 Descargar QR</button>
            </div>
            <div class="chapter-card">
                <a href="capitulo_22.html" class="chapter-link">
                    <div class="chapter-number">22</div>
                    <div class="chapter-title">Cap칤tulo 22</div>
                </a>
                <button class="qr-button" onclick="downloadQR('capitulo_22.html', 'Capitulo_22')">游닌 Descargar QR</button>
            </div>
        </div>

        <div class="example-link">
            <a href="example.html">Ver Ejemplo de Encuesta</a>
        </div>
    </div>

    <script>
        function downloadQR(chapterFile, filename) {
            try {
                // Construct the full URL
                const url = window.location.origin + window.location.pathname.replace('index.html', '') + chapterFile;

                // Create a temporary container for QR code
                const tempContainer = document.createElement('div');
                tempContainer.style.display = 'none';
                document.body.appendChild(tempContainer);

                // Generate QR code (size 400x400 for good quality)
                const qrcode = new QRCode(tempContainer, {
                    text: url,
                    width: 400,
                    height: 400,
                    colorDark: '#000000',
                    colorLight: '#FFFFFF',
                    correctLevel: QRCode.CorrectLevel.H // High error correction for logo overlay
                });

                // Wait a bit for QR code to be generated, then get the canvas
                setTimeout(function() {
                    const canvas = tempContainer.querySelector('canvas');
                    if (!canvas) {
                        console.error('Canvas not found');
                        alert('Error al generar el c칩digo QR. Por favor intenta de nuevo.');
                        document.body.removeChild(tempContainer);
                        return;
                    }

                    const ctx = canvas.getContext('2d');

                    // Load and draw the logo in the center
                    const logo = new Image();
                    logo.onload = function() {
                        // Calculate logo size (about 20% of QR code size)
                        const logoSize = canvas.width * 0.2;
                        const logoX = (canvas.width - logoSize) / 2;
                        const logoY = (canvas.height - logoSize) / 2;

                        // Draw white background circle for logo
                        ctx.fillStyle = 'white';
                        ctx.beginPath();
                        ctx.arc(canvas.width / 2, canvas.height / 2, logoSize / 2 + 5, 0, 2 * Math.PI);
                        ctx.fill();

                        // Draw the logo
                        ctx.drawImage(logo, logoX, logoY, logoSize, logoSize);

                        // Convert canvas to blob and download
                        canvas.toBlob(function(blob) {
                            const downloadUrl = URL.createObjectURL(blob);
                            const a = document.createElement('a');
                            a.href = downloadUrl;
                            a.download = `${filename}_QR.png`;
                            document.body.appendChild(a);
                            a.click();
                            document.body.removeChild(a);
                            URL.revokeObjectURL(downloadUrl);
                            document.body.removeChild(tempContainer);
                        }, 'image/png');
                    };

                    logo.onerror = function() {
                        console.error('Failed to load logo, downloading QR without logo');
                        // Download without logo if loading fails
                        canvas.toBlob(function(blob) {
                            const downloadUrl = URL.createObjectURL(blob);
                            const a = document.createElement('a');
                            a.href = downloadUrl;
                            a.download = `${filename}_QR.png`;
                            document.body.appendChild(a);
                            a.click();
                            document.body.removeChild(a);
                            URL.revokeObjectURL(downloadUrl);
                            document.body.removeChild(tempContainer);
                        }, 'image/png');
                    };

                    // Using data URL to avoid CORS/tainted canvas issues
                    logo.src = 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8c3ZnIGhlaWdodD0iODAwcHgiIHdpZHRoPSI4MDBweCIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiAKCSB2aWV3Qm94PSIwIDAgMjcuODA5IDI3LjgwOSIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxnPgoJPHBhdGggc3R5bGU9ImZpbGw6IzAxMDAwMjsiIGQ9Ik0yMy43NiwwLjEwNmMtMC4wNjctMC4wNzUtMC4xNzgtMC4xMTYtMC4yNzYtMC4xMDRsLTQuMzY3LDAuNTE2CgkJYy0wLjExNiwwLjAxNi0wLjIxNywwLjA5NS0wLjI1OCwwLjIwNGMtMC4wNDUsMC4xMDktMC4wMiwwLjI0MSwwLjA3LDAuMzQybDAuODkxLDAuODg4YzAuMDUzLDAuMDUsMC4xMjMsMC4wNzUsMC4xOTcsMC4wNjcKCQlsMC42OTktMC4wODJsLTMuMzk1LDMuMzk0Yy0wLjk5LTAuNzIzLTIuMTU2LTEuMTA0LTMuMzg1LTEuMTA0Yy0zLjE3NiwwLTUuNzYsMi41NzctNS43Nyw1Ljc1CgkJYy0yLjQ4MywwLjY5Ny00LjIwMiwyLjk1LTQuMjAyLDUuNTQ0YzAsMi44NDUsMi4wNzUsNS4yNTUsNC44NjMsNS42OTJ2Mi4xNTVINi40MzNjLTAuMTMzLDAtMC4yNCwwLjEwNS0wLjI0LDAuMjM2djEuMzMzCgkJYzAsMC4xMzIsMC4xMDcsMC4yMzksMC4yNCwwLjIzOWgyLjM5NXYyLjM5NmMwLDAuMTMzLDAuMTA1LDAuMjM3LDAuMjM4LDAuMjM3aDEuMzM1YzAuMTMsMCwwLjIzNy0wLjEwNCwwLjIzNy0wLjIzN3YtMi4zOTZoMi4zOTYKCQljMC4xMzIsMCwwLjIzOS0wLjEwNywwLjIzOS0wLjIzOXYtMS4zMzNjMC0wLjEzMS0wLjEwNy0wLjIzNi0wLjIzOS0wLjIzNmgtMi4zOTZ2LTIuMTU1YzIuNzgyLTAuNDM4LDQuODU0LTIuODM4LDQuODYzLTUuNjc2CgkJYzIuNDg2LTAuNjk3LDQuMjA0LTIuOTUxLDQuMjA0LTUuNTQ2YzAtMS4yNTMtMC4zOTQtMi40MzgtMS4xMzgtMy40MzZsMy4zMjMtMy4zMjZsLTAuMDY3LDAuNTkzCgkJYy0wLjAwOCwwLjA3MSwwLjAxOCwwLjE0NSwwLjA2NywwLjE5NWwwLjg5LDAuODkzYzAuMDYyLDAuMDYxLDAuMTQzLDAuMDkzLDAuMjI3LDAuMDkzYzAuMDM0LDAsMC4wNjgtMC4wMDYsMC4xMDQtMC4wMTkKCQljMC4xMTktMC4wNDIsMC4yMDEtMC4xNDUsMC4yMTUtMC4yNjhsMC41MTgtNC4zNjRDMjMuODUxLDAuMjY2LDIzLjgyMSwwLjE3NSwyMy43NiwwLjEwNnogTTkuNzM0LDE5LjkyOAoJCWMtMi40MjksMC00LjQwNS0xLjk3OC00LjQwNS00LjQwNmMwLTEuODgxLDEuMjI0LTMuNTU4LDMuMDA2LTQuMTU1YzAuNjI2LDIuNTYyLDIuOTQsNC4zOTYsNS42MDMsNC4zOTYKCQljMC4wNjQsMCwwLjEzMS0wLjAwNCwwLjE5Ni0wLjAwNkMxNC4wMTIsMTguMDc3LDEyLjA4NCwxOS45MjgsOS43MzQsMTkuOTI4eiBNOS42NzgsMTEuMTE4YzAuMDItMC4wMDEsMC4wMzgtMC4wMDEsMC4wNTYtMC4wMDEKCQljMi4wMDIsMCwzLjc1MSwxLjM2Miw0LjI1NywzLjI3NmMtMC4wMTksMC4wMDItMC4wMzcsMC4wMDMtMC4wNTQsMC4wMDNDMTEuOTM0LDE0LjM5NywxMC4xODQsMTMuMDMzLDkuNjc4LDExLjExOHogTTE1LjMzNCwxNC4xNDkKCQljLTAuNjIzLTIuNTYyLTIuOTM4LTQuMzk2LTUuNjAxLTQuMzk2Yy0wLjA2NywwLTAuMTMyLDAuMDAyLTAuMTk3LDAuMDA1YzAuMTIyLTIuMzE5LDIuMDUtNC4xNzIsNC40LTQuMTcyCgkJYzIuNDI4LDAsNC40MDcsMS45NzgsNC40MDcsNC40MDdDMTguMzQ0LDExLjg3NCwxNy4xMTYsMTMuNTUsMTUuMzM0LDE0LjE0OXoiLz4KPC9nPgo8L3N2Zz4=';
                }, 200); // Wait 200ms for QR code generation

            } catch (error) {
                console.error('Error generating QR code:', error);
                alert('Error al generar el c칩digo QR. Por favor intenta de nuevo.');
            }
        }
    </script>
</body>
</html>
